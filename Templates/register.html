<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        input, select {
            display: block;
            width: 100%;
        }
    </style>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="reg-form w-full max-w-md bg-white p-8 rounded-lg shadow-xl">

        <form action="/register" method="post">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">Create Your Account</h2>

            <div class="mb-4">
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <input id="email" type="email" name="email"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <div class="mb-4">
                <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <div class="password-box relative">
                    <input id="password" type="password" name="password"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-20">
                    <button type="button" class="show-btn absolute right-2 top-1/2 transform -translate-y-1/2 h-8 px-3 text-xs bg-gray-500 text-white rounded hover:bg-gray-600"
                        onclick="togglePassword()">
                        Show
                    </button>
                </div>
            </div>

            <div class="mb-4">
                <label for="fullname" class="block text-sm font-medium text-gray-700 mb-1">Your Full Name</label>
                <input id="fullname" type="text" name="fullname"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <div class="mb-4">
                <label for="orgname" class="block text-sm font-medium text-gray-700 mb-1">Organization Name</label>
                <input id="orgname" type="text" name="orgname"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <div class="mb-4">
                <label for="role" class="block text-sm font-medium text-gray-700 mb-1">Requested Role</label>
                <select id="role" name="role" onchange="changes()"
                    class="w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">--Select Role--</option>
                    <option value="manufacturer">Manufacturer</option>
                    <option value="distributor">Distributor</option>
                    <option value="pharmacy">Pharmacy</option>
                </select>
            </div>

            <div id="regCodeGroup" class="mb-4 hidden">
                <label for="regCode" class="block text-sm font-medium text-gray-700 mb-1" id="reglbl">Registration Code (Optional, for validation)</label>
                <input id="regCode" name="regCode" type="text" placeholder="Enter code if provided"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <button type="submit" class="btn w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-300 mb-4"
                onclick="registerUser()">
                Register
            </button>
        </form>

        <button class="btn w-full bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 transition duration-300"
            onclick="location.href='/login'">
            Back to Login
        </button>

    </div>

    <script>

        function togglePassword() {
            let pwd = document.getElementById("password");
            let btn = document.querySelector(".show-btn");
            if (pwd.type === "password") {
                pwd.type = "text";
                btn.innerText = "Hide";
            } else {
                pwd.type = "password";
                btn.innerText = "Show";
            }
        }

        function changes() {
            let value = document.getElementById("role").value;
            let regLbl = document.getElementById("reglbl");
            let regCodeGroup = document.getElementById("regCodeGroup");

            if (value === "manufacturer" || value === "distributor" || value === "pharmacy") {
                regCodeGroup.classList.remove('hidden'); 
                if (value === "manufacturer") {
                    regLbl.innerHTML = "Manufacturer ID";
                } else if (value === "distributor") {
                    regLbl.innerHTML = "Distributor ID";
                } else if (value === "pharmacy") {
                    regLbl.innerHTML = "Pharmacy ID";
                }
            } else {
                regCodeGroup.classList.add('hidden'); 
        }}
    </script>
</body>

</html>
